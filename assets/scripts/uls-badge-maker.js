$(function(){function e(e){$.getJSON("assets/badges.json",function(a){i=a,void 0!==e&&e()}).fail(function(e,a){r(a,this.url)})}function a(){if(!1===s.loaded){for(var e=i.badges,a=0;a<e.length;a++){var r=document.createElement("div");r.classList.add("badge"),r.classList.add("c"+a),$("#badges").append(r),t(e[a],"c"+a)}s.loaded=!0}}function t(e,a){$.get("assets/"+e.path+".svg",function(t){var r=document.getElementsByClassName(a)[0],n=document.createElementNS("http://www.w3.org/2000/svg","svg"),d="";n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("viewBox","0 0 500 500"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.innerHTML=$(t).find("svg").html(),d=(new XMLSerializer).serializeToString(n),r.innerHTML=d,r.innerHTML+='<div class="name">'+e.name+"</div>",fabric.loadSVGFromString(d,function(e,a){var t=fabric.util.groupSVGElements(e,a);o.add(t).renderAll()})})}function r(e,a){a=void 0!==a?a:"";var t="";switch(e){case"parsererror":t="Invalid JSON in "+a;break;default:t="Error loading "+a+". Make sure the file exists.";break}console.error(t)}function n(){if($(document).width()<1025){var e=d.canvasWrapper.outerHeight();d.tabContainer.css("height","calc(100% - "+e+"px)")}else d.tabContainer.css("height","");o.setWidth(d.hiddenShaper.width()),o.setHeight(d.hiddenShaper.height())}var d={wrapper:$("#uls-badge-maker"),header:$("#uls-badge-maker header"),canvasWrapper:$("#uls-badge-maker .badge-body .canvas-wrapper"),hiddenShaper:$("#uls-badge-maker .badge-body .canvas-wrapper .hidden-shaper"),tabContainer:$("#uls-badge-maker .badge-body .badge-container"),tabControl:$("#uls-badge-maker .badge-body .badge-container .tab-control"),tabItem:$("#uls-badge-maker .badge-body .badge-container .tab-control .tab-item"),activeTabItem:$("#uls-badge-maker .badge-body .badge-container .tab-control .tab-item.active"),tabContent:$("#uls-badge-maker .badge-body .badge-container .tab-content"),ctaWrapper:$("#uls-badge-maker .badge-body .cta"),footer:$("#uls-badge-maker footer")},i={},s={loaded:!1},o=new fabric.Canvas("badge-preview");n(),$(window).on("resize",n),e(a),d.tabItem.on("click",function(e){var t=$(e.currentTarget);if(!t.hasClass("active")){var r=t.data("target");switch(d.tabItem.removeClass("active"),t.addClass("active"),d.tabContent.removeClass("active"),$("#"+r).addClass("active"),r){case"badges":a();break;case"badge_bgs":break;case"colors":break}}})});